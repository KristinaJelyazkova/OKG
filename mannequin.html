<!DOCTYPE html>

<html>
	<head>
		<script src="three.min.js"></script>
		<script src="human.js"></script>
	</head>
	
	<body>
		<h1>"Майка показва на сина си упражнения за сутрешна загрявка"<br><small>ф.н. 81495 &ndash; група 5 &ndash; Кристина Желязкова</small></h1>

		<script>
			// нагласяване на цвета и центрирането на текста с имената ви
			document.getElementsByTagName('h1')[0].style = 'color:white; text-align:center; font-size:1.75em';
			
			// рисувателно поле на цял екран
			renderer = new THREE.WebGLRenderer({antialias:true});
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.body.appendChild( renderer.domElement );
			renderer.domElement.style = 'width:100%; height:100%; position:fixed; top:0; left:0; z-index:-1;';
			
			// сцена и камера
			scene = new THREE.Scene();
			camera = new THREE.PerspectiveCamera( 30, window.innerWidth/window.innerHeight, 0.1, 2000 );
			camera.position.set(0,3,150);

			// светлини
			var light = new THREE.DirectionalLight('lightblue',0.8);
			light.position.set(0,1,4);
			scene.add(light);
			scene.add( new THREE.AmbientLight('white',0.4) );
			
			// функция за анимиране на сцената
			var t = 0; // време
			function drawFrame()
			{
				requestAnimationFrame( drawFrame );
				if (animate) animate(t++);
				renderer.render( scene, camera );
			}			
			
			// човече
			майка = женствен();		
			
			// тук се описват статичните елементи на позата
			
			майка.position.set(-30,0,0);
			майка.врът(0,-30,0);
			
			син = мъжествен();
			син.scale.set(0.8,0.8,0.8);
			син.position.set(30,-10,0);
			син.врът(0,150,0);

			
			// анимация на човечето
			animate = function (t)
			{
				// тук се описват динамичните елементи на позата
				// като променливата t е номер на кадър, като се
				// очаква 1 секунда да е приблизително 60 кадъра
				if(t < 240){
					майка.глава.врът(0,10*sin(3*t),0);
					майка.врат.врът(0,50*sin(3*t),0);

				}
				if(t > 30 && t < 270){
					син.глава.врът(0,10*sin(3*(t-30)),0);
					син.врат.врът(0,50*sin(3*(t-30)),0);
				}
				if(t > 250 && t < 270){
					майка.л_ръка.врът(0,-5*t,0);
					майка.д_ръка.врът(0,5*t,0);
				}
				if(t > 270 && t < 290){
					син.л_ръка.врът(0,-5*(t-20),0);
					син.д_ръка.врът(0,5*(t-20),0);
				}
				if(t > 280 && t < 360){
					майка.л_ръка.врът(90*sin(t) + 90,90,0);
					майка.д_ръка.врът(-90*sin(t) - 90,90,0);
				}
				if(t > 310 && t < 390){
					син.л_ръка.врът(90*sin(t-30) + 90,90,0);
					син.д_ръка.врът(-90*sin(t-30) - 90,90,0);
				}
				if(t > 360 && t < 430){
					майка.л_лакът.врът(-100*sin(1.5*t),0,0);
					майка.д_лакът.врът(-100*sin(1.5*t),0,0);
				}
				if(t > 390 && t < 460){
					син.л_лакът.врът(-100*sin(1.5*(t-30)),0,0);
					син.д_лакът.врът(-100*sin(1.5*(t-30)),0,0);
				}
				if(t > 430 && t < 800){
					майка.л_лакът.врът(-70*sin(3*t - 20) + 80,0,0);
					майка.д_лакът.врът(-70*sin(3*t - 20) + 80,0,0);
				}
				if(t > 460 && t < 830){
					син.л_лакът.врът(-70*sin(3*(t - 30) - 20) + 80,0,0);
					син.д_лакът.врът(-70*sin(3*(t - 30) - 20) + 80,0,0);
				}
				if(t > 820 && t < 1105){
					майка.л_китка.врът(50*sin(5*t),0,-30*sin(5*t + 90));
					майка.д_китка.врът(50*sin(5*t),0,30*sin(5*t + 90));
				}
				if(t > 850 && t < 1130){
					син.л_китка.врът(50*sin(5*(t-30)),0,-30*sin(5*(t-30) + 90));
					син.д_китка.врът(50*sin(5*(t-30)),0,30*sin(5*(t-30) + 90));
				}
				if(t > 1120 && t < 1190){
					майка.л_лакът.врът(-70*sin(3*799 - 20) + 80,0,-80*sin(t - 1121));
					майка.д_лакът.врът(-70*sin(3*799 - 20) + 80,0,80*sin(t - 1121));
					майка.л_ръка.врът(90*sin(359) + 90,90,-50*sin(t - 1121));
					майка.д_ръка.врът(-90*sin(359) - 90,90,50*sin(t - 1121));
				}
				if(t > 1150 && t < 1230){
					син.л_лакът.врът(-70*sin(3*799 - 20) + 80,0,-80*sin(t - 1121 - 30));
					син.д_лакът.врът(-70*sin(3*799 - 20) + 80,0,80*sin(t - 1121 - 30));
					син.л_ръка.врът(90*sin(359) + 90,90,-50*sin(t - 1121 - 30));
					син.д_ръка.врът(-90*sin(359) - 90,90,50*sin(t - 1121 - 30));
				}
				if(t > 1220 && t < 1670){
					майка.тяло.врът(0,0,-40*sin(2*(t-1221)));
				}
				if(t > 1250 && t < 1700){
					син.тяло.врът(0,0,-40*sin(2*(t-1221-30)));
				}
			}

			drawFrame();
		</script>
	</body>
</html>